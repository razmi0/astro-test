---
import ThreeTree from "../assets/three-tree.webp";
import { Image } from "astro:assets";
import { generateLorem } from "@/helpers";
import { Button } from "@/components/ui/Button";
import Parallax from "@/components/ui/Paralax.astro";
import colorThemes from "@/components/ui/Color/data";

const slowDelay = "0.8s";
const mediumDelay = "1.2s";
const fastDelay = "1.7s";
const bezier = "cubic-bezier(.25,.75,.5,1.25)";

const themedColor = colorThemes.default("title");
const themedColorCssVar = colorThemes.default("cssVar");
---

<style define:vars={{ slowDelay, mediumDelay, fastDelay, bezier, themedColorCssVar }}>
  div[data-is="hero-text-wrapper"] {
    --speedRatio: 0.1;
    --title-delay: calc(0.2s * var(--speedRatio));
    --sub-title-delay: calc(0.7s * var(--speedRatio));
    /** */
    --paragraph-delay-fast: calc(var(--fastDelay) * var(--speedRatio));
    --paragraph-delay-medium: calc(var(--mediumDelay) * var(--speedRatio));
    --paragraph-delay-slow: calc(var(--slowDelay) * var(--speedRatio));
    /** */
    --button-delay: calc(2s * var(--speedRatio));
  }

  .animation-start {
    opacity: 0;
    filter: blur(2px);
    scale: 0.9;
  }

  .animation-start-button {
    transform: translateY(50px);
    opacity: 0;
    filter: blur(2px);
  }

  .animation-in-title {
    animation: fadeIn 1s ease-in-out forwards;
    animation-delay: var(--title-delay);
  }

  .animation-in-subtitle {
    animation: fadeIn 1s var(--bezier) forwards;
    animation-delay: var(--sub-title-delay);
  }

  [data-delay="fast"].animation-in-paragraph {
    animation: fadeIn 1s var(--bezier) forwards;
    animation-delay: var(--paragraph-delay-fast);
  }

  [data-delay="slow"].animation-in-paragraph {
    animation: fadeIn 1s var(--bezier) forwards;
    animation-delay: var(--paragraph-delay-slow);
  }

  .animation-in-button {
    animation: fadeInButton 1s ease-in-out forwards;
    animation-delay: var(--button-delay);
  }

  @keyframes fadeIn {
    to {
      opacity: 1;
      filter: blur(0px);
      scale: 1;
    }
  }

  @keyframes fadeInButton {
    to {
      opacity: 1;
      filter: blur(0px);
      transform: translateY(0px);
    }
  }

  .anchor {
    animation: wind 2s ease-in-out infinite;
  }

  @keyframes wind {
    0% {
      background-position: 0% 50%;
    }

    0% {
      background-position: 50% 100%;
    }

    0% {
      background-position: 0% 50%;
    }
  }

  .icon-1 {
    position: absolute;
    top: 0;
    right: 0;
    width: 25px;
    transform-origin: 0 0;
    transform: rotate(10deg);
    transition: all 0.5s ease-in-out;
    filter: drop-shadow(2px 2px 3px rgba(0, 0, 0, 0.3));
    fill: white;
  }

  .anchor .icon-1 {
    animation: slay-1 3s cubic-bezier(0.52, 0, 0.58, 1) infinite;
    transform: rotate(10deg);
  }
  .anchor:hover .icon-1,
  .anchor:hover .icon-2,
  .anchor:hover .icon-3 {
    fill: var(--themedColorCssVar);
  }

  @keyframes slay-1 {
    0% {
      transform: rotate(10deg);
    }

    50% {
      transform: rotate(-5deg);
    }

    100% {
      transform: rotate(10deg);
    }
  }

  .icon-2 {
    position: absolute;
    top: 0;
    left: 80%;
    width: 12px;
    transform-origin: 50% 0;
    transform: rotate(10deg);
    transition: all 1s ease-in-out;
    filter: drop-shadow(2px 2px 3px rgba(0, 0, 0, 0.5));
    fill: white;
  }

  .anchor .icon-2 {
    animation: slay-2 2s cubic-bezier(0.52, 0, 0.58, 1) 1s infinite;
    transform: rotate(0);
  }

  @keyframes slay-2 {
    0% {
      transform: rotate(0deg);
    }

    50% {
      transform: rotate(15deg);
    }

    100% {
      transform: rotate(0);
    }
  }

  .icon-3 {
    position: absolute;
    top: 0;
    left: 80%;
    width: 18px;
    transform-origin: 50% 0;
    transform: rotate(-5deg);
    transition: all 1s ease-in-out;
    filter: drop-shadow(2px 2px 3px rgba(0, 0, 0, 0.5));
    fill: white;
  }

  .anchor .icon-3 {
    animation: slay-3 2s cubic-bezier(0.52, 0, 0.58, 1) 1s infinite;
    transform: rotate(0);
  }

  .anchor .icon-1 {
    left: 0%;
    top: 52px;
  }

  @keyframes slay-3 {
    0% {
      transform: rotate(0deg);
    }

    50% {
      transform: rotate(-5deg);
    }

    100% {
      transform: rotate(0);
    }
  }
</style>

<section class="max-h-screen h-screen w-full border-none">
  <Image
    src={ThreeTree}
    alt="Oak"
    class="w-full h-full max-h-screen aspect-[6/16] 2xs:aspect-[9/16] md:aspect-auto object-cover border-none"
  />
  <Parallax />
  <div
    class="[text-shadow:_0_0px_2px_rgb(255_255_255_/_40%)] z-10 bg-transparent absolute top-0 mt-[50%] sm:mt-[40%] md:mt-[35%] lg:mt-[30%] xl:mt-[25%] 2xl:mt-[15%] flex flex-col w-[40ch] sm:w-[50ch] md:w-[60ch] lg:w-[75ch] ps-5 md:ps-10 gap-2"
    data-is="hero-text-wrapper"
  >
    <h1 class="animation-start animation-in-title text-[3rem] text-black/95">
      {generateLorem(1)}
      <span class:list={[`${themedColor} anchor`]}>
        {generateLorem(1)}
        <div class="icon-1">
          <svg
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 0 26.3 65.33"
            style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
            version="1.1"
            xml:space="preserve"
            xmlns="http://www.w3.org/2000/svg"
          >
            <defs></defs>
            <g id="Layer_x0020_1">
              <metadata id="CorelCorpID_0Corel-Layer"></metadata>
              <path
                d="M13.98 52.87c0.37,-0.8 0.6,-1.74 0.67,-2.74 1.01,1.1 2.23,2.68 1.24,3.87 -0.22,0.26 -0.41,0.61 -0.59,0.97 -2.95,5.89 3.44,10.87 2.98,0.78 0.29,0.23 0.73,0.82 1.03,1.18 0.33,0.4 0.7,0.77 1,1.15 0.29,0.64 -0.09,2.68 1.77,4.91 5.42,6.5 5.67,-2.38 0.47,-4.62 -0.41,-0.18 -0.95,-0.26 -1.28,-0.54 -0.5,-0.41 -1.23,-1.37 -1.66,-1.9 0.03,-0.43 -0.17,-0.13 0.11,-0.33 4.98,1.72 8.4,-1.04 2.38,-3.16 -1.98,-0.7 -2.9,-0.36 -4.72,0.16 -0.63,-0.58 -2.38,-3.82 -2.82,-4.76 1.21,0.56 1.72,1.17 3.47,1.3 6.5,0.5 2.31,-4.21 -2.07,-4.04 -1.12,0.04 -1.62,0.37 -2.49,0.62l-1.25 -3.11c0.03,-0.26 0.01,-0.18 0.1,-0.28 1.35,0.86 1.43,1 3.25,1.45 2.35,0.15 3.91,-0.15 1.75,-2.4 -1.22,-1.27 -2.43,-2.04 -4.22,-2.23l-2.08 0.13c-0.35,-0.58 -0.99,-2.59 -1.12,-3.3l-0.01 -0.01 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0c-0.24,-0.36 1.88,1.31 2.58,1.57 1.32,0.49 2.6,0.33 3.82,0 -0.37,-1.08 -1.17,-2.31 -2.13,-3.11 -1.79,-1.51 -3.07,-1.41 -5.22,-1.38l-0.93 -4.07c0.41,-0.57 1.41,0.9 2.82,1.36 0.96,0.31 1.94,0.41 3,0.14 2,-0.52 -2.25,-4.4 -4.53,-4.71 -0.7,-0.1 -1.23,-0.04 -1.92,-0.03 -0.46,-0.82 -0.68,-3.61 -0.92,-4.74 0.8,0.88 1.15,1.54 2.25,2.23 0.8,0.5 1.58,0.78 2.57,0.85 2.54,0.18 -0.1,-3.47 -0.87,-4.24 -1.05,-1.05 -2.34,-1.59 -4.32,-1.78l-0.33 -3.49c0.83,0.67 1.15,1.48 2.3,2.16 1.07,0.63 2.02,0.89 3.58,0.79 0.15,-1.34 -1.07,-3.39 -2.03,-4.3 -1.05,-0.99 -2.08,-1.47 -3.91,-1.68l-0.07 -3.27 0.32 -0.65c0.44,0.88 1.4,1.74 2.24,2.22 0.69,0.39 2.4,1.1 3.44,0.67 0.31,-1.92 -1.84,-4.49 -3.5,-5.29 -0.81,-0.39 -1.61,-0.41 -2.18,-0.68 -0.12,-1.28 0.27,-3.23 0.37,-4.55l-0.89 0c-0.06,1.28 -0.35,3.12 -0.34,4.31 -0.44,0.45 -0.37,0.42 -0.96,0.64 -3.88,1.49 -4.86,6.38 -3.65,7.34 1.42,-0.31 3.69,-2.14 4.16,-3.66 0.23,0.5 0.1,2.36 0.05,3.05 -1.23,0.4 -2.19,1.05 -2.92,1.82 -1.17,1.24 -2.36,4.04 -1.42,5.69 1.52,0.09 4.07,-2.49 4.49,-4.07l0.29 3.18c-2.81,0.96 -5.01,3.68 -4.18,7.43 2.06,-0.09 3.78,-2.56 4.66,-4.15 0.23,1.45 0.67,3.06 0.74,4.52 -1.26,0.93 -2.37,1.8 -2.97,3.55 -0.48,1.4 -0.49,3.72 0.19,4.55 0.59,0.71 2.06,-1.17 2.42,-1.67 1,-1.35 0.81,-1.92 1.29,-2.46l0.7 3.44c-0.49,0.45 -0.94,0.55 -1.5,1.19 -1.93,2.23 -2.14,4.33 -1.01,6.92 0.72,0.09 2.04,-1.4 2.49,-2.06 0.65,-0.95 0.79,-1.68 1.14,-2.88l0.97 2.92c-0.2,0.55 -1.84,1.32 -2.6,3.62 -0.54,1.62 -0.37,3.86 0.67,4.93 0.58,-0.09 1.85,-1.61 2.2,-2.19 0.66,-1.09 0.66,-1.64 1,-2.93l1.32 3.18c-0.23,0.72 -1.63,1.72 -1.82,4.18 -0.17,2.16 1.11,6.88 3.13,2.46zm-4.09 -16.89l-0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 -0 0.01 0.01z"
                class="fil0"></path>
            </g>
          </svg>
        </div>
      </span>
      {generateLorem(1)}
    </h1>

    <p
      class="text-pretty font-bold animation-start animation-in-paragraph text-[1.2rem] md:text-[1.3rem] text-black/90"
      data-delay="fast"
    >
      {generateLorem(5)}
      <span class={`${themedColor} [text-shadow:none] bg-black/80`}>{generateLorem(2)}</span>
      {generateLorem(5)}
    </p>
    <p
      class="text-pretty font-bold animation-start animation-in-paragraph text-[1.2rem] md:text-[1.3rem] text-black/90"
      data-delay="slow"
    >
      {generateLorem(5)}
      <span class={`${themedColor} [text-shadow:none] bg-black/80`}>{generateLorem(2)}</span>
      {generateLorem(5)}
    </p>
    <div class="flex gap-6 animation-start-button animation-in-button w-fit">
      <a href="/activities">
        <Button variant={"outline"} className="bg-pur-500 dark:bg-pur-500 rounded-full px-8 card">
          <span class="text-def-900 dark:text-def-100 font-bold">S'inscrire</span>
        </Button>
      </a>
      <a href="/about">
        <Button variant={"ghost"} className="rounded-full px-8 card">
          <span class="text-def-900 font-bold">DÃ©couvrir...</span>
        </Button>
      </a>
    </div>
  </div>
</section>
