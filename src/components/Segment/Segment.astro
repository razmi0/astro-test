---
import SegmentText from "./SegmentText.astro";
import SegmentImageText from "./SegmentImageText.astro";
import SegmentCards from "./SegmentCards.astro";

import type { SegmentFormat, SegmentPropsMap } from "@/types";

export type SegmentProps<T extends SegmentFormat> = SegmentPropsMap[T];

const SegmentComponent = (() => {
  switch (Astro.props.type) {
    case "image-text":
      return SegmentImageText;
    case "text" && !Astro.props.card:
      return SegmentText;
    case "text" && Astro.props.card:
      return SegmentCards;
    default:
      return SegmentText;
  }
})();
---

<SegmentComponent {...Astro.props as SegmentProps<typeof Astro.props.type>} />
