---
import SegmentText from "./SegmentText.astro";
import SegmentImageText from "./SegmentImageText.astro";
import SegmentCards from "./SegmentCards.astro";

import type { SegmentFormat, SegmentPropsMap } from "@/types";

export type SegmentProps<T extends SegmentFormat> = SegmentPropsMap[T];

const SegmentComponent = (() => {
  if (Astro.props.card) {
    return SegmentCards;
  } else if (Astro.props.type === "text") {
    return SegmentText;
  } else if (Astro.props.type === "image-text") {
    return SegmentImageText;
  }
  return SegmentText;
})();

console.log(SegmentComponent);
---

<SegmentComponent {...Astro.props as SegmentProps<typeof Astro.props.type>} />
