---
import Layout from "@/layouts/Layout.astro";
import "../styles/index.css";
import Header from "@/layouts/Header.astro";
import Footer from "@/layouts/Footer.astro";
import ScreenUnit from "@/layouts/ScreenUnit.astro";
import Hero from "@/components/Hero.astro";
import Content from "@/components/Content/Content.astro";
import type { ScreenUnitProps } from "@/layouts/ScreenUnit.astro";
import type { ContentProps } from "@/components/Content/Content.astro";
import type { ContentFormat } from "@/types";
import { generateLorem } from "@/helpers";

type ScreenUnitType = {
  [key: string]: Omit<ScreenUnitProps, "children"> & { children?: any };
};

type ContentType<T extends ContentFormat> = {
  [key: string]: ContentProps<T>;
};

const thresholds = {
  wrapper: {
    header: 1,
    content: 0.5,
  },
  text: 1,
};

const wrappers: ScreenUnitType = {
  fondateurHeader: {
    theme: "light",
    wrapper: {
      name: "fondateur",
      threshold: thresholds.wrapper.header,
      size: "quarter",
      className: "pb-0 md:pb-0 flex items-center",
    },
    title: {
      name: "fondateur",
      text: "Les fondateurs",
      className: "text-main-500 dark:text-main-300",
      direction: "ltr",
    },
  },
  fondateurVijay: {
    theme: "light",
    wrapper: {
      threshold: thresholds.wrapper.content,
      size: "half",
    },
  },
  fondateurLou: {
    theme: "light",
    wrapper: {
      threshold: thresholds.wrapper.content,
      size: "half",
    },
  },
  histoireHeader: {
    theme: "dark",
    wrapper: {
      name: "histoire",
      threshold: thresholds.wrapper.header,
      size: "quarter",
      className: "pb-0 md:pb-0 flex items-center",
    },
    title: {
      name: "histoire",
      text: "Notre histoire",
      className: "text-main-300 dark:text-main-300",
      direction: "rtl",
    },
  },
  histoire: {
    theme: "dark",
    wrapper: {
      threshold: thresholds.wrapper.content,
      size: "half",
    },
  },
  presentationHeader: {
    theme: "light",
    wrapper: {
      name: "presentation",
      threshold: thresholds.wrapper.header,
      size: "quarter",
      className: "pb-0 md:pb-0 flex items-center",
    },
    title: {
      name: "presentation",
      text: "Présentation",
      className: "text-main-500 dark:text-main-300",
      direction: "ltr",
    },
  },
  presentation: {
    theme: "light",
    wrapper: {
      threshold: thresholds.wrapper.content,
      size: "half",
      className: "",
    },
  },
};

const imageTextContent: ContentType<"image-text"> = {
  vijay: {
    type: "image-text",
    img: {
      name: "lorem-vijay.webp",
      props: {
        alt: "le lorem de vijay",
      },
    },
    article: {
      props: {
        class: "flex-col md:flex-row",
      },
    },
    text: {
      content: generateLorem(40),
      threshold: thresholds.text,
    },
    title: {
      content: "Vijay Leblanc",
    },
    subtitle: {
      content: "Cordiste exégète et collectioneur de cordes",
    },
    theme: "light",
  },
  lou: {
    type: "image-text",
    img: {
      name: "lorem-lou.webp",
      props: {
        alt: "l'image lorem de lou",
      },
    },
    article: {
      props: {
        class: "flex-col md:flex-row sm:pb-12",
      },
    },
    text: {
      content: generateLorem(40),
      threshold: thresholds.text,
    },
    title: {
      content: "Lou Bideau",
    },
    subtitle: {
      content: "Psychologue sur cordage et intellectuelle en bleu",
    },
    theme: "light",
  },
  histoire: {
    type: "image-text",
    img: {
      name: "vijay-et-lou.webp",
      props: {
        alt: "l'image lorem de d'histoire",
      },
    },
    article: {
      props: {
        class: "flex-col md:flex-row sm:pb-12",
      },
    },
    text: {
      content: generateLorem(60),
      threshold: thresholds.text,
    },
    title: {
      content: "L'histoire d'une vie",
    },
    subtitle: {
      content: "Grandir ensemble",
    },
    theme: "dark",
  },
};

const textContent: ContentType<"text"> = {
  presentation: {
    theme: "light",
    type: "text",
    text: {
      content: generateLorem(60),
      threshold: thresholds.text,
    },
    article: {
      props: {
        class: "md:max-w-[65ch]",
      },
    },
  },
};
---

<Layout title="Accueil">
  <Header slot="header" />
  <Hero slot="hero" />
  <Fragment slot="main" id="main">
    {
      /**
       *
       *
       *
       * Fondateurs
       *
       *
       *
       */
    }
    <ScreenUnit {...wrappers.fondateurHeader} />
    <ScreenUnit {...wrappers.fondateurVijay}>
      <Content {...imageTextContent.vijay} />
    </ScreenUnit>
    <ScreenUnit {...wrappers.fondateurLou}>
      <Content {...imageTextContent.lou} />
    </ScreenUnit>
    {
      /**
       *
       *
       *
       * Histoire
       *
       *
       *
       */
    }
    <ScreenUnit {...wrappers.histoireHeader} />
    <ScreenUnit {...wrappers.histoire}>
      <Content {...imageTextContent.histoire} />
    </ScreenUnit>
    {
      /**
       *
       *
       *
       * Presentation
       *
       *
       *
       */
    }
    <ScreenUnit {...wrappers.presentationHeader} />
    <ScreenUnit {...wrappers.presentation}>
      <Content {...textContent.presentation} />
    </ScreenUnit>
  </Fragment>
  <Footer slot="footer" />
</Layout>
